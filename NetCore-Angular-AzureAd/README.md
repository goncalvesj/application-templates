# Template project with .NET Core 3, AAD and Angular 8

This basic template is an alternative to the one that is generated by default in Visual Studio.
It does not use server-side rendering.

The main purpose of this is to avoid having AAD authentication in the Angular side, all of it is handled by the server side .NET app. Only when the user is authenticated the angular app is displayed.

The angular app can then call the MVC controllers and let let them handle all types of secure connections to the resources without the need to send access tokens to the client side.

## How it works

Angular 8 application is generated in ***ClientApp*** folder.

During ``` ng build ``` files are copied to ***wwwroot/dist***. Which are then served by the .Net application.

In ***Layout.cshtlm*** the output from the angular app is referenced.

```
<body>
    <partial name="_LoginPartial" />
    @RenderBody()

    <script type="text/javascript" asp-src-include="~/dist/runtime*.js"></script>
    <script type="text/javascript" asp-src-include="~/dist/polyfills*.js"></script>
    <script type="text/javascript" asp-src-include="~/dist/styles*.js"></script>
    <link rel="stylesheet" asp-href-include="~/dist/styles*.css" />
    <script type="text/javascript" asp-src-include="~/dist/vendor*.js"></script>
    <script type="text/javascript" asp-src-include="~/dist/main*.js"></script>


    @RenderSection("Scripts", required: false)
</body>
```

In ***Index.cshtlm*** the angular app root is included:

```
@{
    ViewData["Title"] = "Home Page";
}
<app-root></app-root>
```

### Replace app.setings.json with AAD data.

```
 "AzureAd": {
    "Instance": "https://login.microsoftonline.com/",
    "Domain": "devad.onmicrosoft.com",
    "TenantId": "xxxx-xxxx-xxxx-xxxx",
    "ClientId": "xxxx-xxxx-xxxx-xxxx",
    "CallbackPath": "/signin-oidc"
  }
```

Run ``` npm i | ng build ``` in ClientApp folder.

Start Visual Studio.